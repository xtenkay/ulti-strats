{"version":3,"file":"index.js","sources":["src/patch/postcss-system-ui-font-family.js","src/lib/plugins-by-id.js","src/lib/get-transformed-insertions.js","src/lib/get-unsupported-browsers-by-feature.js","src/lib/ids-by-execution-order.js","src/lib/write-to-exports.js","src/postcss.js"],"sourcesContent":["import postcss from 'postcss';\n\nexport default postcss.plugin('postcss-system-ui-font', () => root => {\n\troot.walkDecls(propertyRegExp, decl => {\n\t\tdecl.value = decl.value.replace(systemUiMatch, systemUiReplace);\n\t});\n});\n\nconst propertyRegExp = /(?:^(?:-|\\\\002d){2})|(?:^font(?:-family)?$)/i;\nconst whitespace = '[\\\\f\\\\n\\\\r\\\\x09\\\\x20]';\nconst systemUiFamily = [\n\t'system-ui',\n\t/* macOS 10.11-10.12 */ '-apple-system',\n\t/* Windows 6+ */ 'Segoe UI',\n\t/* Android 4+ */ 'Roboto',\n\t/* Ubuntu 10.10+ */ 'Ubuntu',\n\t/* Gnome 3+ */ 'Cantarell',\n\t/* KDE Plasma 5+ */ 'Noto Sans',\n\t/* fallback */ 'sans-serif'\n];\nconst systemUiMatch = new RegExp(`(^|,|${whitespace}+)(?:system-ui${whitespace}*)(?:,${whitespace}*(?:${systemUiFamily.join('|')})${whitespace}*)?(,|$)`, 'i');\nconst systemUiReplace = `$1${systemUiFamily.join(', ')}$2`;\n","import postcssAttributeCaseInsensitive from 'postcss-attribute-case-insensitive';\nimport postcssBlankPseudo from 'css-blank-pseudo/postcss';\nimport postcssColorFunctionalNotation from 'postcss-color-functional-notation';\nimport postcssColorGray from 'postcss-color-gray';\nimport postcssColorHexAlpha from 'postcss-color-hex-alpha';\nimport postcssColorModFunction from 'postcss-color-mod-function';\nimport postcssColorRebeccapurple from 'postcss-color-rebeccapurple';\nimport postcssCustomMedia from 'postcss-custom-media';\nimport postcssCustomProperties from 'postcss-custom-properties';\nimport postcssCustomSelectors from 'postcss-custom-selectors';\nimport postcssDirPseudoClass from 'postcss-dir-pseudo-class';\nimport postcssDoublePositionGradients from 'postcss-double-position-gradients';\nimport postcssEnvFunction from 'postcss-env-function';\nimport postcssFocusVisible from 'postcss-focus-visible';\nimport postcssFocusWithin from 'postcss-focus-within';\nimport postcssFontVariant from 'postcss-font-variant';\nimport postcssFontFamilySystemUi from '../patch/postcss-system-ui-font-family';\nimport postcssGapProperties from 'postcss-gap-properties';\nimport postcssHasPseudo from 'css-has-pseudo/postcss';\nimport postcssImageSetPolyfill from 'postcss-image-set-function';\nimport postcssInitial from 'postcss-initial';\nimport postcssLabFunction from 'postcss-lab-function';\nimport postcssLogical from 'postcss-logical';\nimport postcssMediaMinmax from 'postcss-media-minmax';\nimport postcssNesting from 'postcss-nesting';\nimport postcssOverflowShorthand from 'postcss-overflow-shorthand';\nimport postcssPageBreak from 'postcss-page-break';\nimport postcssPlace from 'postcss-place';\nimport postcssPrefersColorScheme from 'css-prefers-color-scheme/postcss';\nimport postcssPseudoClassAnyLink from 'postcss-pseudo-class-any-link';\nimport postcssReplaceOverflowWrap from 'postcss-replace-overflow-wrap';\nimport postcssSelectorMatches from 'postcss-selector-matches';\nimport postcssSelectorNot from 'postcss-selector-not';\n\n// postcss plugins ordered by id\nexport default {\n\t'all-property': postcssInitial,\n\t'any-link-pseudo-class': postcssPseudoClassAnyLink,\n\t'blank-pseudo-class': postcssBlankPseudo,\n\t'break-properties': postcssPageBreak,\n\t'case-insensitive-attributes': postcssAttributeCaseInsensitive,\n\t'color-functional-notation': postcssColorFunctionalNotation,\n\t'color-mod-function': postcssColorModFunction,\n\t'custom-media-queries': postcssCustomMedia,\n\t'custom-properties': postcssCustomProperties,\n\t'custom-selectors': postcssCustomSelectors,\n\t'dir-pseudo-class': postcssDirPseudoClass,\n\t'double-position-gradients': postcssDoublePositionGradients,\n\t'environment-variables': postcssEnvFunction,\n\t'focus-visible-pseudo-class': postcssFocusVisible,\n\t'focus-within-pseudo-class': postcssFocusWithin,\n\t'font-variant-property': postcssFontVariant,\n\t'gap-properties': postcssGapProperties,\n\t'gray-function': postcssColorGray,\n\t'has-pseudo-class': postcssHasPseudo,\n\t'hexadecimal-alpha-notation': postcssColorHexAlpha,\n\t'image-set-function': postcssImageSetPolyfill,\n\t'lab-function': postcssLabFunction,\n\t'logical-properties-and-values': postcssLogical,\n\t'matches-pseudo-class': postcssSelectorMatches,\n\t'media-query-ranges': postcssMediaMinmax,\n\t'nesting-rules': postcssNesting,\n\t'not-pseudo-class': postcssSelectorNot,\n\t'overflow-property': postcssOverflowShorthand,\n\t'overflow-wrap-property': postcssReplaceOverflowWrap,\n\t'place-properties': postcssPlace,\n\t'prefers-color-scheme-query': postcssPrefersColorScheme,\n\t'rebeccapurple-color': postcssColorRebeccapurple,\n\t'system-ui-font-family': postcssFontFamilySystemUi\n};\n","// return a list of features to be inserted before or after cssdb features\nexport default function getTransformedInsertions(insertions, placement) {\n\treturn Object.keys(insertions).map(\n\t\tid => [].concat(insertions[id]).map(\n\t\t\tplugin => ({\n\t\t\t\t[placement]: true,\n\t\t\t\tplugin,\n\t\t\t\tid\n\t\t\t})\n\t\t)\n\t).reduce(\n\t\t(array, feature) => array.concat(feature), []\n\t);\n}\n","import * as caniuse from 'caniuse-lite';\n\n// return a list of browsers that do not support the feature\nexport default function getUnsupportedBrowsersByFeature(feature) {\n\tconst caniuseFeature = caniuse.features[feature];\n\n\t// if feature support can be determined\n\tif (caniuseFeature) {\n\t\tconst stats = caniuse.feature(caniuseFeature).stats;\n\n\t\t// return an array of browsers and versions that do not support the feature\n\t\tconst results = Object.keys(stats).reduce(\n\t\t\t(browsers, browser) => browsers.concat(\n\t\t\t\tObject.keys(stats[browser]).filter(\n\t\t\t\t\tversion => stats[browser][version].indexOf('y') !== 0\n\t\t\t\t).map(\n\t\t\t\t\tversion => `${browser} ${version}`\n\t\t\t\t)\n\t\t\t),\n\t\t\t[]\n\t\t);\n\n\t\treturn results;\n\t} else {\n\t\t// otherwise, return that the feature does not work in any browser\n\t\treturn [ '> 0%' ];\n\t}\n}\n","// ids ordered by required execution, then alphabetically\nexport default [\n\t'custom-media-queries',\n\t'custom-properties',\n\t'environment-variables', // run environment-variables here to access transpiled custom media params and properties\n\t'image-set-function', // run images-set-function before nesting-rules so that it may fix nested media\n\t'media-query-ranges', // run media-query-range and\n\t'prefers-color-scheme-query', // run prefers-color-scheme-query here to prevent duplicate transpilation after nesting-rules\n\t'nesting-rules',\n\t'custom-selectors', // run custom-selectors after nesting-rules to correctly transpile &:--custom-selector\n\t'any-link-pseudo-class',\n\t'case-insensitive-attributes',\n\t'focus-visible-pseudo-class',\n\t'focus-within-pseudo-class',\n\t'matches-pseudo-class', // run matches-pseudo-class and\n\t'not-pseudo-class', // run not-pseudo-class after other selectors have been transpiled\n\t'logical-properties-and-values', // run logical-properties-and-values before dir-pseudo-class\n\t'dir-pseudo-class',\n\t'all-property', // run all-property before other property polyfills\n\t'color-functional-notation',\n\t'double-position-gradients',\n\t'gray-function',\n\t'hexadecimal-alpha-notation',\n\t'lab-function',\n\t'rebeccapurple-color',\n\t'color-mod-function', // run color-mod after other color modifications have finished\n\t'blank-pseudo-class',\n\t'break-properties',\n\t'font-variant-property',\n\t'has-pseudo-class',\n\t'gap-properties',\n\t'overflow-property',\n\t'overflow-wrap-property',\n\t'place-properties',\n\t'system-ui-font-family'\n];\n","/* eslint max-params: [\"error\", 4] */\n\nimport fs from 'fs';\nimport path from 'path';\n\n/* Write Exports to CSS File\n/* ========================================================================== */\n\nfunction getCustomMediaAsCss(customMedia) {\n\tconst cssContent = Object.keys(customMedia).reduce((cssLines, name) => {\n\t\tcssLines.push(`@custom-media ${name} ${customMedia[name]};`);\n\n\t\treturn cssLines;\n\t}, []).join('\\n');\n\tconst css = `${cssContent}\\n`;\n\n\treturn css;\n}\n\nfunction getCustomPropertiesAsCss(customProperties) {\n\tconst cssContent = Object.keys(customProperties).reduce((cssLines, name) => {\n\t\tcssLines.push(`\\t${name}: ${customProperties[name]};`);\n\n\t\treturn cssLines;\n\t}, []).join('\\n');\n\tconst css = `:root {\\n${cssContent}\\n}\\n`;\n\n\treturn css;\n}\n\nfunction getCustomSelectorsAsCss(customSelectors) {\n\tconst cssContent = Object.keys(customSelectors).reduce((cssLines, name) => {\n\t\tcssLines.push(`@custom-selector ${name} ${customSelectors[name]};`);\n\n\t\treturn cssLines;\n\t}, []).join('\\n');\n\tconst css = `${cssContent}\\n`;\n\n\treturn css;\n}\n\nasync function writeExportsToCssFile(to, customMedia, customProperties, customSelectors) {\n\tconst customPropertiesAsCss = getCustomPropertiesAsCss(customProperties);\n\tconst customMediaAsCss = getCustomMediaAsCss(customMedia);\n\tconst customSelectorsAsCss = getCustomSelectorsAsCss(customSelectors);\n\tconst css = `${customMediaAsCss}\\n${customSelectorsAsCss}\\n${customPropertiesAsCss}`;\n\n\tawait writeFile(to, css);\n}\n\n/* Write Exports to JSON file\n/* ========================================================================== */\n\nasync function writeExportsToJsonFile(to, customMedia, customProperties, customSelectors) {\n\tconst jsonContent = JSON.stringify({\n\t\t'custom-media': customMedia,\n\t\t'custom-properties': customProperties,\n\t\t'custom-selectors': customSelectors\n\t}, null, '  ');\n\tconst json = `${jsonContent}\\n`;\n\n\tawait writeFile(to, json);\n}\n\n/* Write Exports to Common JS file\n/* ========================================================================== */\n\nfunction getObjectWithKeyAsCjs(key, object) {\n\tconst jsContents = Object.keys(object).reduce((jsLines, name) => {\n\t\tjsLines.push(`\\t\\t'${escapeForJS(name)}': '${escapeForJS(object[name])}'`);\n\n\t\treturn jsLines;\n\t}, []).join(',\\n');\n\tconst cjs = `\\n\\t${key}: {\\n${jsContents}\\n\\t}`;\n\n\treturn cjs;\n}\n\nasync function writeExportsToCjsFile(to, customMedia, customProperties, customSelectors) {\n\tconst customMediaAsCjs = getObjectWithKeyAsCjs('customMedia', customMedia);\n\tconst customPropertiesAsCjs = getObjectWithKeyAsCjs('customProperties', customProperties);\n\tconst customSelectorsAsCjs = getObjectWithKeyAsCjs('customSelectors', customSelectors);\n\tconst cjs = `module.exports = {${customMediaAsCjs},${customPropertiesAsCjs},${customSelectorsAsCjs}\\n};\\n`;\n\n\tawait writeFile(to, cjs);\n}\n\n/* Write Exports to Module JS file\n/* ========================================================================== */\n\nfunction getObjectWithKeyAsMjs(key, object) {\n\tconst mjsContents = Object.keys(object).reduce((mjsLines, name) => {\n\t\tmjsLines.push(`\\t'${escapeForJS(name)}': '${escapeForJS(object[name])}'`);\n\n\t\treturn mjsLines;\n\t}, []).join(',\\n');\n\tconst mjs = `export const ${key} = {\\n${mjsContents}\\n};\\n`;\n\n\treturn mjs;\n}\n\nasync function writeExportsToMjsFile(to, customMedia, customProperties, customSelectors) {\n\tconst customMediaAsMjs = getObjectWithKeyAsMjs('customMedia', customMedia);\n\tconst customPropertiesAsMjs = getObjectWithKeyAsMjs('customProperties', customProperties);\n\tconst customSelectorsAsMjs = getObjectWithKeyAsMjs('customSelectors', customSelectors);\n\tconst mjs = `${customMediaAsMjs}\\n${customPropertiesAsMjs}\\n${customSelectorsAsMjs}`;\n\n\tawait writeFile(to, mjs);\n}\n\n/* Write Exports to Exports\n/* ========================================================================== */\n\nexport default function writeToExports(customExports, destinations) {\n\treturn Promise.all([].concat(destinations).map(async destination => {\n\t\tif (destination instanceof Function) {\n\t\t\tawait destination({\n\t\t\t\tcustomMedia: getObjectWithStringifiedKeys(customExports.customMedia),\n\t\t\t\tcustomProperties: getObjectWithStringifiedKeys(customExports.customProperties),\n\t\t\t\tcustomSelectors: getObjectWithStringifiedKeys(customExports.customSelectors)\n\t\t\t});\n\t\t} else {\n\t\t\t// read the destination as an object\n\t\t\tconst opts = destination === Object(destination) ? destination : { to: String(destination) };\n\n\t\t\t// transformer for Exports into a JSON-compatible object\n\t\t\tconst toJSON = opts.toJSON || getObjectWithStringifiedKeys;\n\n\t\t\tif ('customMedia' in opts || 'customProperties' in opts || 'customSelectors' in opts) {\n\t\t\t\t// write directly to an object as customProperties\n\t\t\t\topts.customMedia = toJSON(customExports.customMedia);\n\t\t\t\topts.customProperties = toJSON(customExports.customProperties);\n\t\t\t\topts.customSelectors = toJSON(customExports.customSelectors);\n\t\t\t} else if ('custom-media' in opts || 'custom-properties' in opts || 'custom-selectors' in opts) {\n\t\t\t\t// write directly to an object as custom-properties\n\t\t\t\topts['custom-media'] = toJSON(customExports.customMedia);\n\t\t\t\topts['custom-properties'] = toJSON(customExports.customProperties);\n\t\t\t\topts['custom-selectors'] = toJSON(customExports.customSelectors);\n\t\t\t} else {\n\t\t\t\t// destination pathname\n\t\t\t\tconst to = String(opts.to || '');\n\n\t\t\t\t// type of file being written to\n\t\t\t\tconst type = (opts.type || path.extname(opts.to).slice(1)).toLowerCase();\n\n\t\t\t\t// transformed Exports\n\t\t\t\tconst customMediaJSON = toJSON(customExports.customMedia);\n\t\t\t\tconst customPropertiesJSON = toJSON(customExports.customProperties);\n\t\t\t\tconst customSelectorsJSON = toJSON(customExports.customSelectors);\n\n\t\t\t\tif (type === 'css') {\n\t\t\t\t\tawait writeExportsToCssFile(to, customMediaJSON, customPropertiesJSON, customSelectorsJSON);\n\t\t\t\t}\n\n\t\t\t\tif (type === 'js') {\n\t\t\t\t\tawait writeExportsToCjsFile(to, customMediaJSON, customPropertiesJSON, customSelectorsJSON);\n\t\t\t\t}\n\n\t\t\t\tif (type === 'json') {\n\t\t\t\t\tawait writeExportsToJsonFile(to, customMediaJSON, customPropertiesJSON, customSelectorsJSON);\n\t\t\t\t}\n\n\t\t\t\tif (type === 'mjs') {\n\t\t\t\t\tawait writeExportsToMjsFile(to, customMediaJSON, customPropertiesJSON, customSelectorsJSON);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}));\n}\n\n/* Helper utilities\n/* ========================================================================== */\n\nfunction getObjectWithStringifiedKeys(object) {\n\treturn Object.keys(object).reduce((objectJSON, key) => {\n\t\tobjectJSON[key] = String(object[key]);\n\n\t\treturn objectJSON;\n\t}, {});\n}\n\nfunction writeFile(to, text) {\n\treturn new Promise((resolve, reject) => {\n\t\tfs.writeFile(to, text, error => {\n\t\t\tif (error) {\n\t\t\t\treject(error);\n\t\t\t} else {\n\t\t\t\tresolve();\n\t\t\t}\n\t\t});\n\t});\n}\n\nfunction escapeForJS(string) {\n\treturn string.replace(/\\\\([\\s\\S])|(')/g, '\\\\$1$2').replace(/\\n/g, '\\\\n').replace(/\\r/g, '\\\\r');\n}\n","import autoprefixer from 'autoprefixer'\nimport browserslist from 'browserslist';\nimport cssdb from 'cssdb';\nimport postcss from 'postcss';\nimport plugins from './lib/plugins-by-id';\nimport getTransformedInsertions from './lib/get-transformed-insertions';\nimport getUnsupportedBrowsersByFeature from './lib/get-unsupported-browsers-by-feature';\nimport idsByExecutionOrder from './lib/ids-by-execution-order';\nimport writeToExports from './lib/write-to-exports';\n\nexport default postcss.plugin('postcss-preset-env', opts => {\n\t// initialize options\n\tconst features = Object(Object(opts).features);\n\tconst insertBefore = Object(Object(opts).insertBefore);\n\tconst insertAfter = Object(Object(opts).insertAfter);\n\tconst browsers = Object(opts).browsers;\n\tconst stage = 'stage' in Object(opts)\n\t\t? opts.stage === false\n\t\t\t? 5\n\t\t: parseInt(opts.stage) || 0\n\t: 2;\n\tconst autoprefixerOptions = Object(opts).autoprefixer;\n\tconst sharedOpts = initializeSharedOpts(Object(opts));\n\tconst stagedAutoprefixer = autoprefixerOptions === false\n\t\t? () => {}\n\t: autoprefixer(Object.assign({ overrideBrowserslist: browsers }, autoprefixerOptions));\n\n\t// polyfillable features (those with an available postcss plugin)\n\tconst polyfillableFeatures = cssdb.concat(\n\t\t// additional features to be inserted before cssdb features\n\t\tgetTransformedInsertions(insertBefore, 'insertBefore'),\n\t\t// additional features to be inserted after cssdb features\n\t\tgetTransformedInsertions(insertAfter, 'insertAfter')\n\t).filter(\n\t\t// inserted features or features with an available postcss plugin\n\t\tfeature => feature.insertBefore || feature.id in plugins\n\t).sort(\n\t\t// features sorted by execution order and then insertion order\n\t\t(a, b) => idsByExecutionOrder.indexOf(a.id) - idsByExecutionOrder.indexOf(b.id) || (a.insertBefore ? -1 : b.insertBefore ? 1 : 0) || (a.insertAfter ? 1 : b.insertAfter ? -1 : 0)\n\t).map(\n\t\t// polyfillable features as an object\n\t\tfeature => {\n\t\t\t// target browsers for the polyfill\n\t\t\tconst unsupportedBrowsers = getUnsupportedBrowsersByFeature(feature.caniuse);\n\n\t\t\treturn feature.insertBefore || feature.insertAfter ? {\n\t\t\t\tbrowsers: unsupportedBrowsers,\n\t\t\t\tplugin:   feature.plugin,\n\t\t\t\tid:       `${feature.insertBefore ? 'before' : 'after'}-${feature.id}`,\n\t\t\t\tstage:    6\n\t\t\t} : {\n\t\t\t\tbrowsers: unsupportedBrowsers,\n\t\t\t\tplugin:   plugins[feature.id],\n\t\t\t\tid:       feature.id,\n\t\t\t\tstage:    feature.stage\n\t\t\t};\n\t\t}\n\t);\n\n\t// staged features (those at or above the selected stage)\n\tconst stagedFeatures = polyfillableFeatures.filter(\n\t\tfeature => feature.id in features\n\t\t\t? features[feature.id]\n\t\t: feature.stage >= stage\n\t).map(\n\t\tfeature => ({\n\t\t\tbrowsers: feature.browsers,\n\t\t\tplugin: typeof feature.plugin.process === 'function'\n\t\t\t\t? features[feature.id] === true\n\t\t\t\t\t? sharedOpts\n\t\t\t\t\t\t// if the plugin is enabled and has shared options\n\t\t\t\t\t\t? feature.plugin(Object.assign({}, sharedOpts))\n\t\t\t\t\t// otherwise, if the plugin is enabled\n\t\t\t\t\t: feature.plugin()\n\t\t\t\t: sharedOpts\n\t\t\t\t\t// if the plugin has shared options and individual options\n\t\t\t\t\t? feature.plugin(Object.assign({}, sharedOpts, features[feature.id]))\n\t\t\t\t// if the plugin has individual options\n\t\t\t\t: feature.plugin(Object.assign({}, features[feature.id]))\n\t\t\t// if the plugin is already initialized\n\t\t\t: feature.plugin,\n\t\t\tid: feature.id\n\t\t})\n\t);\n\n\t// browsers supported by the configuration\n\tconst supportedBrowsers = browserslist(browsers, { ignoreUnknownVersions: true });\n\n\t// features supported by the stage and browsers\n\tconst supportedFeatures = stagedFeatures.filter(\n\t\tfeature => supportedBrowsers.some(\n\t\t\tsupportedBrowser => browserslist(feature.browsers, {\n\t\t\t\tignoreUnknownVersions: true\n\t\t\t}).some(\n\t\t\t\tpolyfillBrowser => polyfillBrowser === supportedBrowser\n\t\t\t)\n\t\t)\n\t);\n\n\treturn (root, result) => {\n\t\t// polyfills run in execution order\n\t\tconst polyfills = supportedFeatures.reduce(\n\t\t\t(promise, feature) => promise.then(\n\t\t\t\t() => feature.plugin(result.root, result)\n\t\t\t),\n\t\t\tPromise.resolve()\n\t\t).then(\n\t\t\t() => stagedAutoprefixer(result.root, result)\n\t\t).then(\n\t\t\t() => {\n\t\t\t\tif (Object(opts).exportTo) {\n\t\t\t\t\twriteToExports(sharedOpts.exportTo, opts.exportTo);\n\t\t\t\t}\n\t\t\t}\n\t\t)\n\n\t\treturn polyfills;\n\t};\n});\n\nconst initializeSharedOpts = opts => {\n\tif ('importFrom' in opts || 'exportTo' in opts || 'preserve' in opts) {\n\t\tconst sharedOpts = {};\n\n\t\tif ('importFrom' in opts) {\n\t\t\tsharedOpts.importFrom = opts.importFrom;\n\t\t}\n\n\t\tif ('exportTo' in opts) {\n\t\t\tsharedOpts.exportTo = {\n\t\t\t\tcustomMedia: {},\n\t\t\t\tcustomProperties: {},\n\t\t\t\tcustomSelectors: {},\n\t\t\t};\n\t\t}\n\n\t\tif ('preserve' in opts) {\n\t\t\tsharedOpts.preserve = opts.preserve;\n\t\t}\n\n\t\treturn sharedOpts;\n\t}\n\n\treturn false;\n};\n"],"names":["postcss","plugin","root","walkDecls","propertyRegExp","decl","value","replace","systemUiMatch","systemUiReplace","whitespace","systemUiFamily","RegExp","join","postcssInitial","postcssPseudoClassAnyLink","postcssBlankPseudo","postcssPageBreak","postcssAttributeCaseInsensitive","postcssColorFunctionalNotation","postcssColorModFunction","postcssCustomMedia","postcssCustomProperties","postcssCustomSelectors","postcssDirPseudoClass","postcssDoublePositionGradients","postcssEnvFunction","postcssFocusVisible","postcssFocusWithin","postcssFontVariant","postcssGapProperties","postcssColorGray","postcssHasPseudo","postcssColorHexAlpha","postcssImageSetPolyfill","postcssLabFunction","postcssLogical","postcssSelectorMatches","postcssMediaMinmax","postcssNesting","postcssSelectorNot","postcssOverflowShorthand","postcssReplaceOverflowWrap","postcssPlace","postcssPrefersColorScheme","postcssColorRebeccapurple","postcssFontFamilySystemUi","getTransformedInsertions","insertions","placement","Object","keys","map","id","concat","reduce","array","feature","getUnsupportedBrowsersByFeature","caniuseFeature","caniuse","stats","results","browsers","browser","filter","version","indexOf","getCustomMediaAsCss","customMedia","cssContent","cssLines","name","push","css","getCustomPropertiesAsCss","customProperties","getCustomSelectorsAsCss","customSelectors","writeExportsToCssFile","_x","_x2","_x3","_x4","_writeExportsToCssFile","apply","arguments","_asyncToGenerator","to","customPropertiesAsCss","customMediaAsCss","customSelectorsAsCss","writeFile","writeExportsToJsonFile","_x5","_x6","_x7","_x8","_writeExportsToJsonFile","jsonContent","JSON","stringify","json","getObjectWithKeyAsCjs","key","object","jsContents","jsLines","escapeForJS","cjs","writeExportsToCjsFile","_x9","_x10","_x11","_x12","_writeExportsToCjsFile","customMediaAsCjs","customPropertiesAsCjs","customSelectorsAsCjs","getObjectWithKeyAsMjs","mjsContents","mjsLines","mjs","writeExportsToMjsFile","_x13","_x14","_x15","_x16","_writeExportsToMjsFile","customMediaAsMjs","customPropertiesAsMjs","customSelectorsAsMjs","writeToExports","customExports","destinations","Promise","all","_ref","destination","Function","getObjectWithStringifiedKeys","opts","String","toJSON","type","path","extname","slice","toLowerCase","customMediaJSON","customPropertiesJSON","customSelectorsJSON","_x17","objectJSON","text","resolve","reject","fs","error","string","features","insertBefore","insertAfter","stage","parseInt","autoprefixerOptions","autoprefixer","sharedOpts","initializeSharedOpts","stagedAutoprefixer","assign","overrideBrowserslist","polyfillableFeatures","cssdb","plugins","sort","a","b","idsByExecutionOrder","unsupportedBrowsers","stagedFeatures","process","supportedBrowsers","browserslist","ignoreUnknownVersions","supportedFeatures","some","supportedBrowser","polyfillBrowser","result","polyfills","promise","then","exportTo","importFrom","preserve"],"mappings":"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"}